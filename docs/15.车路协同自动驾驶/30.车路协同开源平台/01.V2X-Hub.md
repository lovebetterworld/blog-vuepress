

- Github地址：https://github.com/usdot-fhwa-OPS/V2X-Hub

## 1 V2X-Hub介绍

V2X Hub是一个消息处理程序，它充当连接车辆部署的基础设施组件的转换器和数据聚合/传播器。

### 1.1 概述

为了将基础设施组件引入互联汽车体系结构，您需要软件以车辆和基础设施设备都能理解的格式促进数据交换。通过汽车工程师协会(SAE)标准格式的基本安全信息(BSM)接收来自车辆的数据，并将数据转换为基础设施组件可以理解的全国运输通信ITS协议(NTCIP)。反之亦然。

它将NTCIP的信号相位和定时(Signal Phase and Timing)数据转换到SAE，并将其发送到路边单元(RSU)，广播到包括车辆在内的移动设备。

V2X Hub**是一个消息处理程序，它充当连接车辆部署的基础设施组件的转换器和数据聚合/传播器**。

V2X Hub的开发旨在通过减少集成工作和问题，**支持辖区部署车辆到基础设施(V2I)技术**。

- V2X Hub是一个**软件平台**，使联网车辆能够与现有的交通管理硬件和系统进行通信，如交通信号控制器、交通管理中心、行人和车辆检测系统、道路天气传感器和动态消息标志。

- V2X Hub通过转换不同标准和协议之间的通信简化了集成。
- 通过模块化设计，软件插件可以有效地连接到新的硬件，自定义连接到交通管理中心，并在路边设备上运行连接车辆(CV)安全应用程序。

V2X Hub系统可以减少创建和部署基于路边的V2X系统所需的时间。V2X Hub系统包含一套用于处理特定功能的插件。这些插件的输出会有所不同，但是任何与外部通信的插件都会产生来自J2735-2016消息集的消息。插件可以请求接收系统中其他插件生成的数据。例如，一个位置插件可以创建一个位置消息，然后由MAP插件接收并在其处理中使用。下面是V2X集线器系统中包含的插件及其产生的消息的列表。

- CSW插件-曲线速度警告插件将监控J2735 BSM消息在一个曲线，并发送消息到一个动态消息标志，当它检测到车辆正在接近一个曲线过快。CSW插件还生成一个J2735 TIM消息，其中包含一个CSW车载CV应用程序将要使用的曲线的进场区域。
- DMS插件-动态消息符号(DMS)插件将接收来自其他插件的消息，并将信息翻译为NTCIP 1203，以便在DMS上显示。
- 地图插件-生成J2735地图格式的交叉几何。
- SPAT插件-使用NTCIP 1202与交通信号控制器(TSC)通信，并创建一个J2735 SPAT消息。
- DSRC立即转发插件-将所有J2735流量发送到4.1 RSU以发送出DSRC无线电。
- 消息接收插件-接收所有来自4.1 RSU的J2735流量，供其他V2X Hub插件使用。
- 位置插件-与GPS设备通信产生位置信息和可选的NMEA GP*句子为V2X Hub系统。
- RTCM插件-与NTRIP网络通信，创建J2735 RTCM位置更正消息。
- ODE Plugin—使用已知的IP地址和端口将数据推送到运行中的数据环境服务器。
- 行人插件-创建一个PSM，使用从移动设备(如手机)通过本地web服务器获得的信息。
- 抢占插件——使用NTCIP 1202 V3命令调用控制器上的抢占表，以便在BSMs请求时为紧急车辆提供通道
- SPAT日志插件-日志V2X Hub生成，上层编码的SPAT消息在一个。csv文件连同系统时间戳。
- TIM插件——根据用户通过GUI或本地web服务器的输入，从一个.xml文件创建并广播TIM消息
- BSM Logger Plugin -解码并记录消息接收插件接收到的BSMs到一个.csv文件

V2X Hub是V2I应用的通信、计算和处理平台，提供以下功能。

- 使用SAE J2735消息跨多个接口进行消息处理:
  - 整合来自多个来源的数据，编译信息，通过多种通信方法传递给车辆和移动设备。
  - 从多个车辆和移动设备获取和聚合数据，并发送到运输管理实体。
    - 向当地车辆和设备分发旅行者信息消息(TIM)。
- 基于本地基础设施的计算和处理的示例
  - 使用实时天气和道路状况数据，本地计算建议的速度和停车距离，为即将发生碰撞的V2I安全场景，如减速(工作区)警告和现场天气信息警告。
  - 汇集车辆天气数据，以便有效地与交通管理实体进行通信，以便对天气作出反应的交通管理。
  - 多模态智能交通信号系统(MMITSS)“交叉口水平”功能包括J2735交叉口几何(MAP)和J2735信号相位和时间(啐)广播管理器，配备的车辆跟踪器，优先请求服务器，和交通信号控制器接口。

## 2 系统要求

V2X Hub软件可以运行在大多数带有Pentium核心处理器、至少有64位处理器、2GB RAM和至少64GB驱动器空间的基于linux的计算机上。软件的性能将取决于系统的计算能力和可用RAM。

该项目是在一台带有i3核心处理器、4GB内存、64GB硬盘空间、运行Ubuntu 16.04 LTS的机器上开发和测试的。

## 3 安装

- [V2X-Hub/Installation_and_Setup.md at develop · usdot-fhwa-OPS/V2X-Hub (github.com)](https://github.com/usdot-fhwa-OPS/V2X-Hub/blob/develop/docs/Installation_and_Setup.md)

## 4 Docker方式安装

环境要求：

- Docker CE

- Docker Compose

Docker Hub仓库地址：https://hub.docker.com/u/usdotfhwaops

该链接下包含了AMD和arm两个版本，根据自己需要选择。

### 4.1 运行V2X Hub镜像

#### 4.1.1 AMD specific Instructions

```bash
$ cd /V2X-Hub/configuration/amd64/
$ chmod +x initialization.sh
$ sudo ./initialization.sh
```

#### 4.1.2 ARM specific Instructions

```bash
$ cd /V2X-Hub/configuration/arm64/
$ chmod +x initialization.sh
$ sudo ./initialization.sh
```

### 4.2 访问

V2X Hub目前需要一个证书异常才能在本地机器上运行。下面是如何添加这个例外。

1. 访问地址：https://127.0.0.1:19760/
2. 在浏览器中为安全证书需求添加一个例外。
3. 导航到https://127.0.0.1获取V2I Hub GUI。该代码附带的所有插件都是默认安装的。