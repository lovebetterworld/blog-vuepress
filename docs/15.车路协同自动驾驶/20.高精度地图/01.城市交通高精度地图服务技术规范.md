---
title: 01.城市交通高精度地图服务技术规范
date: 2022-05-09 22:36:34
permalink: /hdmap/hadmap01/
categories:
  - 高精度地图
tags:
  - 
---

<h2>
    <center>城市交通高精度地图服务技术规范</center>
</h2>

## 1 范围

本标准规定了城市道路高精度地图服务的数据格式和发布标准。

本标准适用于以城市交通数字化系统建设和运维管理为主要应用内容的高精度地理信息平台，服务于智慧交管、智慧运管、智慧公路、智慧枢纽、智慧公交、智能网联、应急保障及其他城市交通管理运营业务。

## 2 范围性引用文件

下列文件对于本标准的应用是必不可少的。凡是注日期的引用文件，仅所注日期的版本适用于本标准。凡是不注日期的引用文件，其最新版本（包括所有的修改单）适用于本标准。

GB/T 19710-2005 地理信息元数据

GB/T 40767-2021 地理空间数据交换基本要求

GB/T 37118-2028 地理实体空间数据规范

GB/T 35634-2017 公共服务电子地图瓦片数据规范

## 3 术语和定义

下列术语和定义适用于本文件。

### 3.1 客户端 client

指与服务器相对应，为客户提供本地服务的程序。

### 3.2 坐标参照系 coordinate reference system

通常采用以经纬线网格为基础赋以数字代码的方法。

### 3.3 坐标系 coordinate system

使用三维球面来定义地球表面位置，以实现通过经纬度对地球表面点位引用的坐标系。

### 3.4 地理信息 geographic information

地理信息是地理数据所蕴含和表达的地理含义，是与地理环境要素有关的物质的数量、质量、性质、分布特征、联系和规律的数字、文字、图像和图形等的总称。

### 3.5 图层 layer

将空间信息按其几何特征及属性划分成的专题数据。

### 3.6 地图 map

指按照一定的法则，有选择地以二维或多维形式与手段在平面或球面上表示地球若干现象的图形或图像。

### 3.7 请求 request

向服务器端请求地图数据或者地图服务。

### 3.8 服务器 server

具备承担响应服务请求、承担服务、保障服务等能力的电子设备。

### 3.9 套接字 Socket

对网络中不同主机上的应用进程之间进行双向通信的端点的抽象。一个套接字就是网络上进程通信的一端。

### 3.10 WebSocket

一种在单个TCP连接上进行全双工通信的协议。

### 3.11 地理标识符 geographic identifier

以标记或代码形式标识地点的空间参照。利用专业软件将采集的交通设施数据进行地图的配图符号制作；利用专业的配图软件进行交通设施地图样式的配置。力求做到真实展现道路实际交通设施状况的基础上尽量的美化。

## 4 缩略语

下列缩略语适用于本文件。

OD：一次出行的起点和终点（Origin Destination）

SDK：软件开发工具包（Software Develpment Kit）

GPS：全球定位系统（Global Positioning System）

IMU：捷联惯性测量组件(Inertial Measurement Unit）

API：应用程序接口（Application Programming Interface）

HTTP：超文本传输协议（Hyper Text Transfer Protocol）

JSON：JS对象简谱（JavaScript Object Notation）

GIS：地理信息系统（Geographic Information System）

BIM：建筑信息模型（Building Information Modeling）

DEM：数字高程模型（Digital Elevation Model）

## 5 基本规定

### 5.1 地理坐标系

明确本规范中对于城市道路高精度地图的地理坐标系要求。

**通常采用CGCS2000坐标系**；高程基准为以椭球面为起算面的大地高程。

### 5.2 数据格式

明确城市道路高精度地图二维格式和三维格式。

#### 5.2.1 二维包括

a） 点云数据（las文件或rcp文件）

b） 矢量数据（shp文件）

c） CAD成果数据（DWG文件）

d） Open Drive数据（xodr文件）

#### 5.2.1 三维包括

a） 模型数据（IVE文件）

b） 道路及相关部件的三维模型数据（OBJ、OSGB、OSG文件）

c） 此外还包括：

d） 全景轨迹数据（cam文件）

e） 全景切割照片（JPG文件）

### 5.3 数据规格

明确本规范中对城市道路高精度地图数据规格的要求，包括交警高精度地图规格（HDMap-P）、高速公路高精度地图规格（HDMap-T）、**车道级导航地图规格（HADMap）**、停车导航地图规格（SD-Parking）。

### 5.4 分级

明确城市道路高精度地图数据展示的级别和精细度。**利用移动激光点云设备采集，基于点云数据制作高精度地图。高精度地图可展示快速路、主干路、次干路、支路四级城市道路，精确到车道级别，绝对精度20cm、相对精度相对精度每100m误差20cm以内。**

## 6 二维地图发布服务

### 6.1 一般规定

提出符合国家地图服务发布法规及相关规定的数据服务要求。

### 6.2 跨平台要求

提出地图服务对跨平台调用的需求。支持Web、APP、公众号、小程序等各种环境的地图应用开发，满足用户不同环境、不同业务需求下的地图应用开发需求。

#### 6.2.1 Web应用

适用对交通枢纽、商场、停车场等公共区域运行状况的实时监控，多维度数据的实时展示和场景的可视化展现。提供一站式的web开发服务。

#### 6.2.2 App应用

依托于丰富的SDK和详细的接口文档，易景空间可以提供基于地图服务的APP软件应用开发，适用于ios、Android等主流移动端操作系统。为用户提供更加专业的软件研发服务和技术支持服务。

#### 6.2.3 微信公众号应用

基于公众号实现地图场景的可视化展示以及基于地图的各种导航、查询等便捷服务。提升公众号用户留存和活跃度。

#### 6.2.4 小程序应用

依托小程序开发的地图应用，功能强大、即用即走，以更低的用户使用门槛为用户提供更加优质的服务与体验。

### 6.3 全功能服务

提出地图服务对标准服务、OGC服务以及第三方通用服务的兼容要求。包括提供高精度地图与应用平台之间数据交互与融合分析服务。

**利用OGC标准服务接口如WMS服务、WFS服务、WCS服务、WMTS服务等实现，实现应用平台对高精度地图的调用**。

通过GIS数据库与应用平台数据库之间的数据交互和数据融合分析算法，完成数据的挖掘和分析，并将数据分析结果利用高精度地图进行可视化呈现。

### 6.4 服务扩展能力

提出除满足全功能需求外的REST服务扩展和空间服务扩展。符合开放性要求，遵循国际标准化组织的技术标准，选定的产品既要自己独特优势，又能与其它多家优秀的产品进行组合，共同构成一个开放的、易扩充的、稳定的、统一的软件系统，便于后续的维护、升级和扩充以及二次开发，并具有支持多种接口的能力。地图数据服务接口方面主要涵盖二维矢量地图服务、二维影像服务及三维模型服务等。在平台的设计开发过程中，在保证系统自身功能的正常使用之外，将会充分考虑对三维地图引擎接口的封装，预留与其他系统和动态数据融合调试的接口，便于其他系统方对三维地图的成功调用，最终建设统一的二次开发接口，提供专业、全面的GIS功能。

## 7 三维数据发布服务

### 7.1 基本规定

提出符合国家测绘法及相关规定的数据服务要求。提供人工三维建模、实景三维建模的数据采集制作服务。

### 7.2 模型内容

发布包含的路网数据内容和路网附属设施内容。主要包括自然环境、建筑、道路周边设备，以及指定的车辆模型，道路（标示线）、交通设施设备（交通指示牌、龙门架、路灯、摄像头、路侧感知传感器、信号灯（相位信息）、V2X通讯设备）、植被、建筑（道路两侧）自然环境等。

### 7.3 表现形式

分别规定路网模型其他附属模型的表现形式。根据现场实景照片数据，参考高精度地图成果数据，对路面、路面设备设施、建筑、绿化、桥梁、天空、河流、湖泊等要素进行建模，生产三维实景模型数据。

### 7.4 模型分级

规定不同等级对路网属性的展示需求。三维场景建模级别如下：

#### 7.4.1 粗模+影像

三维地形数据集由高分辨率影像叠加DEM（数字高程模型）构成，“粗模”则是在具有高度信息的大比例尺矢量数据的基础上，通过三维GIS平台批量拉伸处理成几何体块，模型外立面纹理来自虚拟材质库。此种三维数据生产效率相对较高，在数据量上相对较低，适合省、市范围内的大场景三维项目采用。

#### 7.4.2 粗模+精模

该三维场景是在上述三维数据的基础上加以部分精细模型构成。精细模型指通过三维建模软件按建筑实际结构制作的几何体，赋以由实地照片处理而来的真实纹理图片构成的模型。在制作范围内，可选取重点建筑物作为精细建模对象，在单位面积内，精模和粗模可按一定比例的数量组成。此种三维数据适合市域级范围的场景构建。

#### 7.4.3 精模+烘焙

完全由精细模型构成的三维场景，场景内的所有模型均按严格的规范制作，后期经过三维软件的烘焙处理，使模型具有强烈的光影效果从而使模型更加逼真。此种三维数据对硬件和软件均有较高的要求，数据量庞大，适合小场景三维展示。

### 7.5 模型精细度

规定路网内容及周边设施的精细度等级。

#### 7.5.1 长度量测等相对精度

摄影系统中心到物体的距离，相对精度达到 20cm 内。

#### 7.5.2 绝对精度

交通标志等的绝对位置精度达到50cm内，主要取决于 GPS/IMU 的精度。

### 7.6 模型属性规定

配合数据入库需求规定数据的属性。三维实景模型数据统一按3Dmax格式提供，并转换成三维软件所需要的。创建交通设施数据库，经过标志标牌标准化处理、标线数据标准化处理、照片数据标准化处理后的数据入库，包含所有交通设施精细化属性，如名称、分类、内容、辅助信息、材质、光学特性、是否临时标志、显示方式、尺寸、支撑方式、位置坐标、所在道路、设立时间等。

### 7.7 元数据要求

依据《GB/T 19710-2005 地理信息元数据》标准，引入标识信息、参照系、空间表示、数据质量、内容信息、元数据扩展信息六大部分，元数据仅定义作业单元级，实现对数据结构的统一控制。

## 8 空间数据库

### 8.1 一般规定

提出符合国家地理信息空间数据库及相关规定的数据服务要求。

### 8.2 数据库组织模型

提出高精地图路网数据的组织形式，以关系型数据库为主，确定建设四类数据库：

a. 是基础地理信息数据库，主要依托京雄高速涵盖现有的基础地理信息数据成果（含地图数据及影像数据），整合本项目中采集的高精度的公路路网基础数据形成；

b. 是高速公路空间数据库，主要存储高速公路基础设施数据、构造物数据、沿线设施、里程桩等公路相关的空间数据；

c. 是地址编码数据库，主要存储用于GIS系统的地址编码功能的数据；

d. 是业务实时检测数据库，主要存储相关的业务相关的监测设备实时上传的动态数据。

### 8.3 空间数据库实体关系

规定空间数据库的实体之间的关系。平台数据由地图数据、业务数据构成，基础数据在oracle数据库中存储，并通过数据库服务进行查询调用。其中，地图背景和项目范围等地图数据来自于地图服务器，由地图服务器发布并供前端调用；系统展示的交通设施数据（如龙门架、支撑杆、道路标志标牌、视频监控）中的矢量数据来自于数据库，而系统中展示的道路面、地面箭头、地面标线、公交设施等数据来自于项目处理得到的3dTiles文件，存放于Web目录下方。

### 8.4 命名原则

规定数据及属性的命名原则。遵照国家规范标准和交通行业规范标准，设计标准的命名规范。

### 8.5 关系编码原则

规定路网与设施之间的关系编码原则。根据业务需求，遵照国家规范标准和有关行业规范标准，设计标准的信息分类编码体系。遵循行业的编码规范，所有代码类数据原则上只增不改，保障代码变化前后数据的延续性和避免对数据一致性产生影响。

### 8.6 信息交换规范

规定不同业务层之前、图层之间的信息交换规范。业务平台由“4+1+N”的图层结构构成：

#### 8.6.1 4个基础层：

a） 基础道路层：包含道路轮廓、道路面等要素。

b） 道路车道层：包含车道线、车道箭头、说明文字等要素。

c） 设施设备层：包含标志标牌、信号灯、卡口、电警、监控等要素。

d） 逻辑控制层：包含道路拓扑、车道连通、标志标牌控制范围、允许通行交通方式等。

#### 8.6.2 数据接入层：

提供数据接入和呈现接口，包含流量、信号配时、视频流等数据接口。实现地图与其他信息化系统无缝衔接匹配，拒绝信息烟囱和信息孤岛。

#### 8.6.3 算法拓展层：

根据业务需求嵌入交通算法，如导航、OD分析、路径反推、可达性分析等。可叠加N个算法应用，是地图具备无限可能。

#### 8.6.4 涉及的数据接口通信协议共分为两种：

WebSocket/Socket、HTTP，统一的数据传输格式为JSON。

#### 8.6.5 底层通讯：

针对系统同硬件底层的数据及命令传输，比如：地图数据的展示，一般由底层的SDK引擎通过Socket协议与硬件的显示器端进行通讯。

#### 8.6.6 应用层通讯：

一方面针对实时性高的数据（比如：监测设备的实时检测数据、监控移动车辆的GPS位置信息），然后通过此接口传输给系统进行实时获取相关检测及监控信息并支撑平台的应用展示及数据存储；另一方面针对实时性要求不高的数据且根据具体的功能需求进行展示的情况，采用HTTP协议，由系统主动去请求相关的接口获取对应的数据。

#### 8.6.7 数据层通讯：

采用HTTP协议，最终由系统根据数据的调用需要进行主动请求获取并展示。此协议的数据接口API需要遵守RESTful风格，以HTTP状态码来区分请求是否成功。

## 9 地图平台基础服务

### 9.1 一般规定

规定扩展服务的可适用范围与方向，包括可视化服务、数据服务、应用分析服务、数据分发服务、目录服务、其它类。

### 9.2 可视化服务

规定提供返回渲染好的地图服务的要求。结合高精度地图详细的要素，经过图层组织、风格渲染、创建专题图、显示优化、图廓整饰等过程，建成统一的地图要素符号库及地图配色标准，提升地图信息的可读性及信息传递性。

### 9.3 数据服务

规定服务对于数据请求与访问的要求。提供统一的地图引擎及二次开发接口，为其他业务应用系统提供相应的数据共享及功能展示应用接口服务。

#### 9.3.1 统一的高精度地图引擎

建设统一高精度地图引擎，构建基于高精度地图的二三维一体化GIS平台，为各业务系统提供二三维一体化的地理信息服务，结合业务功能实现三维可视化展示和分析效果，达成精细化管理目标。地图引擎主要包括应用于地图服务发布应用的服务端引擎以及基于WebGL技术实现地图展现的客户端渲染WebGIS引擎。

#### 9.3.2 统一二次开发接口

建设统一的二次开发接口，提供一系列的功能应用；包括专业、全面的GIS功能、车道级二维地图、车道级三维可视化平台的展现、搜索、缩放等基础功能、支持车道及车辆路径规划、轨迹查询以及公路交通事件等非永久地理信息变化数据叠加、短时更新等功能，通过对二次开发接口的调用，可以实现车路协同、智慧公路、四维实景仿真、3D GIS+BIM基础设施平台、北斗高精度定位综合应用、养护管理系统等相关地理信息展示应用。

#### 9.3.3 应用分析服务

规定对于应用分析服务的要求。

#### 9.3.4 交通信息监测

规定服务对于交通信息采集、监测、数据融合支持的要求。数据服务助力咨询机构建设长效化数据采集渠道，汇集人口、用地、设施、出行、运行等动、静态数据资源，积累数据资产，夯实研究工作基础，亦可直接形成地图数据产品，对外提供数据分析服务。实现交通信息监测的地图产品主要有：二、三维路网数据产品、停车地图产品、自动驾驶高精度地图产品（OpenDrive）。

#### 9.3.5 精细化管理

规定服务对于路网精细化管理的要求。充分利用人工智能技术，通过大数据分析平台对路网、路况、交通量、气象、收费、路政、服务区等数据积累，在路网综合分析的功能基础上，搭建路网交通量预测相关模型，智能判断相关时间段、相关区域内路网运行状况，实现数据的智能分析、指标比对。通过三维地图平台实现路网运行态势研判、拥堵预测、养护决策支持、关键系统设备运行状态健康评价、事故分析与评价等功能。

#### 9.3.6 全寿命周期养护运维

规定服务对于全寿命周期养护运维管理的要求。通过大数据分析模型，建立动态的、可预测的全生命周期运维养护系统。既服务于日常运维养护管理工作，又可以动态更新设施、设备运行状态，最终达到关键设施、关键区位、关键设备以及关键部件均能形成自己的全生命周期记录，以此分析预测运维养护趋势，科学地管理运维养护工作。

#### 9.3.7 交通仿真

满足对于交通仿真渲染的需求。支持对交通仿真软件输出结果进行渲染，根据输入的数据，自动创建微观仿真模型，对城市交通系统车辆运行现状、行人出行、交通设施等进行模拟分析与评价，将各模型的行为及相互作用，准确、灵活地反映在三维场景中。建设区域交通仿真模型，预设交通管理方案，可实现车道级数据发布与管理，并将方案仿真结果结合高精度地图展示，提供方案管理模块，为区域交通协调控制提供预案管理。

#### 9.3.8 全景交互

满足三维场景中全景交互的要求。基于三维高精度地图的真实、立体、全景展现的能力，实现城市区域内的道路、建筑、市政设施、绿化、环境等逼真呈现。支持全景图片的展现，通过输入地点的坐标、相机方向等信息，检索匹配的全景图片，在指定的容器中展现全影图，并支持使用鼠标进行交互。

#### 9.3.9 智慧交管

规定服务对于支持智慧交管的要求。高精度地图具有车道级道路属性，能够很好地与交通管理数据结合，计算更为精细化的交通指标，为交通管理决策提供更为精准的数据支撑。高精度地图与高精度定位融合技术，为交通管理人员、车辆、设备提供高精度的位置服务，利用高精度地图实时呈现，可支持警情精确定位、实时路径导航、警力快速部署、案件信息精准上传等功能的开发。

#### 9.3.10 智慧运管

满足对于智慧运管扩展的要求。针对传统基于二维GIS设施管理不直观、位置不精确、难维护等问题，通过设施设备单体化建模与三维高精度地图融合，实现交通设施设备的可视化展现，设备管理“所见即所得”。接入设施设备养护数据和管理流程，例如设施设备浏览及展示、设施设备查询及统计、设施设备智能管理、设施设备变更、设施设备智慧维护等，实现设施设备的全周期生命管理，大大提高交通设施设备的运维效率和水平。

#### 9.3.11 智慧公路

规定服务对于支持公路管理、建设、养护等要求。基于公路全息数据，利用高精度地图、BIM建模、大数据计算分析、交通仿真等技术，并结合公路运营管理业务搭建一套整体系统平台，实现公路精细化管理，提供对公众的地图发布平台。主要建设任务包括全息数据采集、制作、接入、展现及管理，交通场景全景展示、交通短时预测、交通管理影响评价等。

#### 9.3.12 智慧公交

规定服务对于提升公交信息化水平的要求。将高精度地图引入智慧公交车示范场景，为智慧公交提供统一数据展示平台，基于三维地图引擎实现智慧公交数据监控与展示，具有创新性。利用统一的监控平台进行数据接入、管理和展示，增强多元数据的融合和共享，利用地图发布功能将公交运行信息进行统一发布，有效提高公交的服务水平。

#### 9.3.13 智慧停车

满足对于智慧停车的要求。在现阶段智慧停车模式的基础上，基于高精度地图，通过超声波探测和微处理器相结合实时更新来确定车位的占用情况，无线传输至手机应用软件，让车主掌握最新的停车场车位的最新状况。升级面向用户的服务模式，即通过物联网+高精地图+互联网+停车方式，实现车位导航、反向寻车、停车预约的智慧停车V2.0解决方案，并在车端和手机端实现双渠道实现方式。主要业务包括停车资源数据库建设、停车高精度地图、停车位网联系统、车位级智慧导航等。

#### 9.3.14 智能网联

满足对于智能网联汽车、智能监控平台的要求。基于采集制作的测试区或开放道路高精地图数据，融合三维建模技术和GIS技术生成运营环境的孪生数字化地理信息空间，通过接入测试道路监控视频、智能路侧设备信息、车辆位置信息、场景状态等实时场外信息，搭建一套面向智能网联场景的智能监控平台，实现对测试车辆、测试道路、运行场景及运行过程进行实时动态监控和全过程展示。主要业务包括车道级仿真、道路信息监控、车辆数据监控、V2X智能网联监控等。

### 9.4 数据分发服务

规定关于数据分发服务的要求，将数据按规定的要求进行提取和处理，然后分发。

### 9.5 目录服务

规定提供对地图服务及服务元数据编目和查询功能的要求。

### 9.6 其他服务

规定关于地图平台服务的其他服务要求。根据其他地图平台业务需求，进行定制化服务。将特定的抽象地理数据直接表现为可远程调取的可视化几何图形。通常地，使用ArcGIS Server将原始的shp数据发布为地图服务，一般包含以下几个步骤：

a） 收集项目shp数据，并符号化制作mxd文档；

b） 上传mxd以及shp文件到服务器开始发布；

c） 设置地图服务，比如设置服务类型、切片方案等；

d） 设置完成后可以选择保存服务定义文件（.sd文件，该文件包含有mxd文件、shp数据和服务配置情况xml文件）；

e） 点击发布按钮，完成地图服务发布。

### 9.7 地图安全

应按照国家测绘法的规定，所有对外地图都需要定位加密偏转，因此提供的最终成果交付物为加密后的数据交换格式。此外，为保障数据传输的机密性，对数据发布环节加密、设置许可，加强数据库的访问控制、应用软件的安全防护等方面进行安全要求。