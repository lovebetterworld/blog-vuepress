---
title: 代码仓库的创建规范
date: 2022-04-05 21:18:22
permalink: /pages/faf9a8/
categories:
  - 项目管理
  - 研发规范
tags:
  - 
---
## 一、代码仓库创建规范

1、 项目创建需符合`Group`规范。

2、 创建项目必须添加`Project description`说明。

3、 每个项目都需要`README.md`文件。

4、 除文档说明类型仓库，所有代码仓库都需要`.gitignore`。

*注：有模板的项目，要以统一的模板创建项目*

### 1.1 README文件规范

README文件结构如下：

```
<项目简介/Introduction>
<快速使用/Quick start>
<文档说明/Documentation>
```

- `Introduction` 用于阐述项目基本情况和功能（是什么，用来做什么的）。
- `Quick Start` 主要包括两部分内容：简易的安装部署说明(Deployment)和使用案例(Example)。
- `Documentation` 部分是核心的文档，对于大型项目可以使用超链接代替。

参考：
![img](https://gitee.com/er-huomeng/l-img/raw/master/typora/1464583-20200906151514980-662028943.png)

### 1.2 版本管理规范

项目代码release包括三类：

- 大版本(x.0.0)
- 小版本(x.x.0)
- 补丁(x.x.x)

### 1.3 Git Commit代码提交规范

#### 1.3.1 commit message格式

git commit 提交样式规范：

```
<type>: <subject>
注意：冒号后面又空格

<类型>: <标题>
<空一行>
<内容>
```

#### 1.3.2 格式说明

##### 1. &lt;类型>

用于说明 commit 的类别(type)，只允许使用下面7个标识。

```json
# 主要type
feat:     增加新功能
fix:      修复bug

# 特殊type
docs:     只改动了文档相关的内容
style:    不影响代码含义的改动，例如去掉空格、改变缩进、增删分号
build:    构造工具的或者外部依赖的改动，例如webpack，npm
refactor: 代码重构时使用,重构（即不是新增功能，也不是修改bug的代码变动）
revert:   执行git revert打印的message

# 暂不使用type
test:     添加测试或者修改现有测试
perf:     提高性能的改动
ci:       与CI（持续集成服务）有关的改动
chore:    不修改src或者test的其余修改，例如构建过程或辅助工具的变动
```

当一次改动包括`主要type`与`特殊type`时，统一采用`主要type`。

##### 2.  &lt;标题>

commit 目的的简短描述，不超过50个字符

##### 3.  &lt;内容>

对本次 commit 的详细描述，可以分成多行，可详细说明代码变动的动机。

#### 1.3.3 示例

```yaml
feat(compiler): 题目 #10286

对本次 commit 的详细描述，可以分成多行，可详细说明代码变动的动机
```

## 二、分支管理规范（新增PR规范，目前阶段非必要）

### 2.1 远程仓库

#### 2.1.1 分支约束

远程仓库只允许出现五种类型的分支：

- **主分支**：项目的主要分支也就是master分支。用于正式发布，该分支禁止任何人直接提交，提交合并请求由对应项目主管人员确认合并。
- **开发分支**：项目的开发迭代分支，用于开发发布，常规开发任务的代码直接提交至该分支或者由临时分支合并至该分支。
- **测试分支**：项目的测试迭代分支，用户测试发布，该分支禁止任何人直接提交，提交合并请求由对应项目主管人员确认合并。
- **归档分支**：项目的里程碑版本保留分支，由测试负责人、项目负责人、产品负责人直接定义版本，从测试分支归档出新分支。
- **临时分支**：由项目的开发人员建立的临时分支，禁止交叉提交，谁建立的分支便由谁负责管理，用于合并至开发分支，合并完成之后禁止新提交应当立刻删除。

#### 2.1.2 主分支

主分支全局仓库唯一，分支名称固定为**master**，任何对主分支的直接提交定性为严重违规行为，需要尝试对主分支进行合并应当由对应仓库的开发负责人提交合并请求并由上级负责人通过合并实现对主分支的变更。

#### 2.1.3 开发分支

开发分支全局仓库唯一，分支名称固定为**devLoop**，开发人员允许对该分支直接提交，任何向开发分支提交的代码在提交之前应当保证能够正常通过编译、部署并运行，无法部署的提交应当立刻修复并重新提交。开发分支部署的代码应当由开发人员完成所有的单元测试，全部通过之后再向测试分支提交。

#### 2.1.4 测试分支

测试分支全局仓库唯一，分支名称固定为**testLooop**，禁止直接对该分支提交，测试分支应当由开发分支提交合并请求而来，由开发人员提交合并请求，由主要开发人员通过合并请求实现测试部署。小型项目、中间件研发可以酌情省略测试分支，由开发分支部署交于测试进行质量校验，大型项目或产品必须保证有测试分支。

### 2.2 归档分支

归档分支全局仓管可以具备多个，直接由测试分支或主分支派生，除特殊情况下禁止任何提交行为，归档分支名称格式为**release-版本号**（如：`release-1.2.0`），分支由对应项目的开发主要负责人再与测试负责人沟通之后创建，已经后续无论是BUG、还是功能性问题都不应当项归档分支提交。

#### 2.2.1 临时分支

临时分支全局仓库可以具备多个，临时分支名称格式为**tem-开发者-创建时间**（如：`tem-tangyuecan-20200724`），由开发人员自行创建，临时分支的提交进制交叉提交，只允许分支创建者提交，临时分支只能合并到开发分支一旦完成合并之后应当立即删除，可以直接本地合并之后向开发分支提交或者提交合并请求由开发负责人进行合并，临时分支的生命周期原则上不超过三个工作日。临时分支主要用于无法在短时间之内完成的开发工作，或者整合至开发分支之后无法运行情况，这样考虑之下才有临时分支的概念。

#### 2.2.2 提交描述

所以代码的提交、合并都应该通过文字目前描述出改此提交、合并的目的如下面几种：

- `修复问题：#xxxx`（禅道BUG的ID或者ISSUE）
- `修复问题：xxxx`（BUG的名称）
- `完成功能：#xxxx`（禅道的任务ID）
- `完成功能：xxxxx`（功能的名称）

任何无意义或者具体目的的提交禁止同步至远程仓库，包括远程临时分支（禁止commit）

### 2.3 合并流程

![img](https://gitee.com/er-huomeng/l-img/raw/master/gitdoc.jpg)

