---
title: 09.前端代码开发规范
date: 2022-04-12 18:18:22
permalink: /standard/font1a40a/
categories:
  - 研发规范
tags:
  - 
---

- [（建议收藏）快来看看我们团队是如何制定前端开发规范的？ - 掘金 (juejin.cn)](https://juejin.cn/post/7068160968877932574#heading-5)
- [前端团队代码统一规范最佳实践 - 掘金 (juejin.cn)](https://juejin.cn/post/7086383019551883272)

一些大厂的前端规范

| 地址                                                         |
| ------------------------------------------------------------ |
| [页面规范 · TGideas文档库 (qq.com)](https://tgideas.qq.com/doc/frontend/spec/common/) |
| [Aotu.io - 前端代码规范](https://guide.aotu.io/index.html)   |
| [风格指南 — Vue.js (vuejs.org)](https://cn.vuejs.org/v2/style-guide/index.html) |

## 1 命名风格

### 1.1 CSS命名规范

1、选择器命名一律用小写字母, 避免用拼音命名

```css
正例: 
#name / .name1

反例： 
._name / .Name / .NAME / .$name / .22name / .yemian
```

2、选择器统一采用 横线 `-` 作为分隔符，禁止使用下划线 `_` 分割，且分隔符尽量不超过4个

```css
正例：
.page-wrapper / .page-wrapper-box

反例：
.page_wrapper / .page_wrapper_ / #_page
```

### 1.2 JS命名规范

1、代码中的命名均不能用美元符号 `$` 和下划线 `_` 开始，也不能以 `$` 和 `_` 以及数字结束

2、代码中的命名禁止使用拼音、拼音+英文、中文

3、类名使用帕斯卡法命名

```
如：UserPermissio
```

4、函数名、方法名、属性名、变量名统一用驼峰法命名

```
如：submitHandle / getName
```

5、常量统一用大写，单词之间用下划线 `_` 隔开

```
如：GLOBAL_CONFIG
```

6、TS接口名统一用大写字母 `I` 作为前缀

```
如：IPersonProps
```

7、TS枚举类名称及其属性统一用大写字母，单词间用下划线( \color{red}__ )隔开

```css
// 性别 
enum SEX_TYPE { 
    MALE, 
    FEMALE
}
```

8、函数名、方法名、属性名、变量名命名规约

- 获取单个对象用 get 做前缀。
- 获取多个对象用 list 做前缀。
- 查询用 query/search 做前缀。
- 插入用 add/save 做前缀。
- 编辑、更新用 edit/update 做前缀。
- 删除用 remove 做前缀。
- 数组对象用 List 做后缀。

## 2 代码格式

### 2.1 CSS代码格式

1、个样式独占一行，并且使用Tab或4个空格缩进，禁止不换行书写

**说明: 如果使用Tab缩进，必须设置1个Tab为4个空格。**

```css
正例：
.page { 
    .margin: 10px; 
    .padding: 10px; 
    .background: #000; 
}

反例:
.page{margin: 10px;padding: 10px;background: #000;}
```

2、选择器单独一行，且其与左大括号 `{` 之间留出一个空格，右大括号 `}` 单独成行; 冒号 `:` 后面留出一个空格，每个样式用分号 `;` 结尾

```css
正例：
.page { 
    .padding: 10px; 
}

反例：
.page{ padding:10px }
```

3、以逗号分隔的属性值，每个逗号后留出一个空格

```css
正例：
.page { 
    rgba: (255, 55, 55, 5); 
}

反例：
.page{ 
    rgba: (255,255,255,.5); 
}
```

4、免层级嵌套过多，尽量不超过4层

```css
正例：
.page .wrapper .box { 
    /* ... /* 
}

反例：
.page .wrapper .box div p { 
    /* ... /* 
}
```

### 2.2 JS代码格式

1、尽量使用 `const` 和 `let` 声明变量

**说明: var 会引起变量提升，使用const 确保你无法重新对常量赋值，使用let确保你无法重新声明变量。**

```
const a = 1;
let b = 2;
```

2、大括号使用规约

- 左大括号前不换行，并留一个空格
- 左大括号后换行
- `else` 等代码与右大括号之间留一个空格
- 表示终止的右大括号必须单独成行
- 箭头函数内如果只有一条表达式可以省略左右大括号

```js
正例：
function getNumber(x) { 
    /* ... */ 
} 

if (x > 5) { 
    /* ... */ 
} else { 
    /* ... */ 
} 

[1, 2, 3, 4, 5].map(item => item.filter > 2);


反例：
function getNumber(x) 
{ 
    /* ... */ 
} 
if (x > 5){ 
    /* ... */ 
}else{ 
    /* ... */ 
}
```

3、引号使用规约

- HTML代码中的class、id或其它属性的值均采用双引号
- JS代码中字符串均采用单引号

```js
正例：
<input type= "file" />
let name = 'zhangsan';

反例：
<input type= 'file' />
let name = "zhangsan";
```

4、注意 `===` 和 `==` 、 `!=` 和 `!==` 的使用

**说明: 使用 `==` 和 `!=` 容易造成隐式转换，如 `5 == '5' = true; 5 != '5' = false`。**

5、采用4个空格或者Tab缩进

**说明: 如果使用Tab缩进，必须设置1个Tab为4个空格。**

6、`if / for / while / switch / catch` 等关键字与小括号之间都必须加空格

```
if (x === 100) {}
for (let i = 0; i < 10; i++) {}
```

7、左小括号与字符间不留空格，右小括号与字符间也不留空格

```
正例： 
if (x === 100) {}

反例： 
if ( x === 100 ) {}
```

8、任何二目、三目运算符(如：`+` `-` `*` `/` `%` `=` `+=` `*=` `&&` `||`) 的左右两边都要加空格

```
a + b = 2;
x * y = z; 
x == y ? x : y;
```

9、注释的双斜线与注释内容之间留一个空格

10、三元运算符在一条表达式中最多出现两次

```
正例：
let num = x === y ? x : x > 100 ? z : y;

反例：
let num = x === 100 ? x : x === 120 ? y : x === 150 ? z : 200;
```

11、多个参数后边统一加一个空格

```
foo(x, y, z)
```

12、for循环体内的代码不超过50行

**说明: 包括注释、空行、回车总的行数不超过50行，如果的确无法避免需将部分代码抽离出来成为独立函数。**

13、函数/方法之间插入两个空行分隔以提升代码可读性

```js
正例：
getMax() { 
    /* ... */ 
} 


listUser() { 
    /* ... */ 
}


反例：
getMax() { 
    /* ... */ 
} 
listUser() { 
    /* ... */ 
}
```

## 3 对象处理

1、不要修改标准JS对象的原型

**说明: 修改标准JS对象的原型会可能会覆盖原有的方法或属性。**

2、不要通过原型向对象添加新的属性或方法，可以将指定功能封装为工具函数，通过导出的方式引用

```js
正例：
export function format(date, format) {
    /* ... */
};

反例：
Date.prototype.format = function(format) {
    /* ... */
}
```

3、使用对象直接量创建对象或数组

```
let obj = {}; 
let list = [];
```

4、使用展开运算符 `...` 复制或合并数组/对象

```
let a = {name: 'zhangsan'}; 
let b = {age: 22}; 
let c = {...a, ...b}; // {name: 'zhangsan', age: 22} 

let x = [1, 2]; 
let y = [3, 4]; 
let z = [...x, ...y]; // [1, 2, 3, 4]
```

5、使用解构获取对象的属性值

```
正例：
function getUser(user) { 
    const { name, age } = user; 
}

反例：
function getUser(user) { 
    let name = user.name; 
    let age = user.age; 
}
```

6、使用数组对象的方法前，如果无法确定变量为数组类型，需要对变量做类型检查

```
if (Array.isArray(obj)) { 
    /* ... */ 
}
```

7、使用 `JSON.parse` 方法解析变量前，需对变量做类型及JSON格式检查

**说明: 如果变量为undefiend或不是json结构的字符串, js会抛出语法异常，阻塞js的执行。**

8、在组件生命周期内调用setTimeout或者setInterval时，一定要在销毁组件时，使用clearTimeout或clearInterval清除定时器对象

**说明: 如果组件销毁后，定时器对象并未清除，则在回调函数执行时，组件可能并不存在，从而可能会造成内存溢出的问题。**

## 4 注释规约

1、自定义函数/方法应加上相应的注释，说明该函数/方法的用途，如果有需要应对参数标注说明，如果是在TS中则应定义返回值类型(无返回值的可省略)

```js
// 获取最大值 
function max(x, y) { 
    return x > y ? x : y; 
} 


/** 
 * 获取最大值 
 * @param x 
 * @param y 
 */ 
const max = (x: number, y: number): number => { 
    return x > y ? x : y; 
} 
 
 
/** 
 * 删除数组中某元素 
 * @param list 数组 
 * @param index 下标 
 */ 
remove(list: string[], index: number) { 
    /* ... */ 
}
```

2、组件、类、类方法的注释使用 `/** xxx */` 方式，禁止使用 `// xxx` 方式

```js
/** 
 * 用户列表组件 
 */ 
class UserList { 
    /** 
     * 刷新列表 
     */ 
    refresh = () => { 
        /* ... */ 
    } 
}
```

3、所有字典、枚举类型字段必须要有主注释说明，说明该字段用途

```js
// 用户角色 
const roleOptions = [ 
    {value: 1, name: '管理员'}, 
    {value: 2, name: '普通用户'}, 
]; 

// 性别 
enum SEX_TYPE { 
    MALE, 
    FEMALE
}
```

4、代码修改的同时，注释也要进行相应的修改，尤其是参数，返回值的修改

5、注释力求简明扼要，要能够使自己及别的程序员能够及时了解注释的含义，不用的注释及时删除

## 5 基本规范

在 HTML, JavaScript 和 CSS 上的通用规则。

### 5.1 文件/资源命名

- 以可读性而言，用`小写字母命名`或`小写字母与下划线组合命名`文件名与文件所在的文件夹；禁止组件使用 form1,form2,detail 等这种不可读太概略的命名方式，尽量使用语义化，与业务或功能相关的词来命名（比如 document, file_upload）。
- 图片静态资源命名, 使用`小写字母命名`或`小写字母与下划线组合命名`（比如 imgbg.jpg， home_top_img.png）。
- 确保文件命名总是以`字母开头`而不是数字。
- 特殊含义的文件，需要对文件增加前后缀或特定的扩展名（比如 .min.js, .min.css, .config.json），抑或一串前缀（比如 all.main.min.css）。使用点分隔符来区分这些在文件名中带有清晰意义的元数据。

### 5.2 文本缩进

一次缩进 2 个空格

### 5.3 标签语义化

标签语义化，即让标签有自己的含义。根据元素（有时称作“标签”）其被创造出来时的初始意义来使用它。 好处：有根据有目的地使用 HTML 元素，对于可访问性、代码重用、代码效率来说意义重大，同时有利于搜索引擎优化（SEO）。 打个比方，用 header 元素来定义头部标题，p 元素来定义文字段落，用 a 元素来定义链接锚点。 比如，title, header, main, footer, section, aside, article,ul, li

```html
<title>页面标题</title>
<main>页面主要内容</main>
<section>定义文档中的节（section、区段）</section>
<aside>定义侧边栏、相关链接列表等</aside>
<p>一行文字</p>
<span>一行文字</span>
<hn>：h1~h6，分级标题
    <header>定义头部包含logo,导航等</header>
    <footer>页脚</footer>
</hn>
```

### 5.4 缩写属性

比如 `font` 字体缩写，按顺序 `font-style/font-variant/font-weight/font-size/line-height/font-family；background、box-shadow `等缩写

```css
font: italic bold 12px/20px '微软雅黑'；

background: #00FF00 url(bgimage.gif) no-repeat fixed top;
```

`margin, padding`, 等 省略“0”值后面的单位。 例如：

```css
// good
margin: 0;

// not good
margin: 0px;
```

### 5.5 声明顺序

为了保证更好的可读性和可扫描性，样式声明应该遵循以下顺序：

- 结构性属性:

  a. display
   b. position, left, top, right 等
   c. overflow, float, clear 等
   d. margin, padding

- 表现性属性：

  a. background, border 等.

```css
/* position 定位 > 盒模型 > 其他属性 */
.ele {
    /* position 定位 */
    position: absolute;
    left: 10px;
    top: 10px;
    z-index: 1;

    /* 盒模型 */
    display: block;
    overflow: hidden;
    float: left;
    width: 100px;
    height: 100px;
    margin: 20px auto;
    padding: 0 10px;

    /* 排版 */
    font: normal 13px “Helvetica Neue”, sans-serif;
    line-height: 1.5;
    color: #333;
    text-align: center;

    /* 可见属性 */
    background-color: #f5f5f5;
    border: 1px solid #e5e5e5;
    border-radius: 3px;

    /* 不影响布局的属性 */
    opacity: 1;
}
```

## 6 前端项目编码规范

### 6.1 编码规范

代码提交规范。

- 1. 每次代码提交之前，请**确保无任何语法错误、功能性错误等再提交**；
  2. 每次代码提交之时，请写清楚注释, 修改的主要功能一一列出，如`git commit -am"1.修改用户管理-新增功能 2. 优化冗余代码"`；
- Js 代码块引号类型为单引号 `''`
- 生产环境下禁止代码含断点 debugger 提交
- 总是使用 ===精确的比较操作符，而少使用“==”，避免强类型转换带来的困扰
- js 代码尽量使用`小驼峰命名`， js 事件方法名，多以动词命名，且选取有意义的词，并写清必要的注释。 允许的变量命名和事件方法名如下：

```js
const max = 20;
let myFavoriteColor = [];
const _myFavoriteColor = '#112C85';
/**
     * 监听input值变化
     * @param val String input输入值
     * @param oldVal String input原来旧值
     * */
function onInputChangeVal(val, oldVal) {}
```

- 不能含有未使用的变量, 未使用请及时删除

- 不能含有未使用的组件, 未使用请及时删除

- 不能含有无用的代码块, 未使用请及时删除

- 同一个项目内的文件结构尽量一致，如

  1. 样式预编译严格使用 less，避免同时使用多种，造成开发维护困扰。
  2. 文件命名、静态资源名, 请使用`纯小写字母`或`小写字母和下划线组合`。

  ```bash
  文件夹或文件(组件)命名：home, layout, file_upload, zixun, zx_service etc.
  静态资源名：imgbg.jpg, home_top_img.png, base.css etc.
  ```

  1. id/class 类名，css 命名组织结构这里采用 BEM 规则。 请使用`纯小写字母`或`小写字母和下划线组合`。

     **BEM 规则: block_element--modifier 语法**
      Block 块级元素，容器类，如.form .header .top .main；
      Element 主要是以 1 个下划线接在 block 之后，来表示从属关系；没有对同一页上其他 blocks/elements 的依赖， 如.form_input;
      Modifier 修饰符，主要是以两个中短线连接，block 或 element 上的标记，使用他来改变外观或行为。如：disabled,highlighted,checked,fixed。

  ```css
  /* 布局容器类： */
  #header, #main, #footer,
  .l_left, .l_right, .l_main, .l_list, .l_list_item
  /* 模块类： */
  .module, .mod_list, .mod_title, .mod_bottom, .dialog, .dialog_title,
  /* 态类：*/
  .is_collapsed
  .is_clicked
  .is_error
  .is_success
  .is_hidden
  ```

  ```css
  /* BEM规则: */
  .block {
  }
  .block_element {
  }
  .block_element--modifier {
  }
  
  .form {
  }
  .form_input {
  }
  .form_input--checked {
  }
  
  /* Modifier修饰符: */
  /* block--modifier_value 语法 */
  .button--state_success {
  }
  .form--theme_xmas {
  }
  .form--simple {
  }
  .input--disabled {
  }
  ```

  1. 尽量使用公用的变量或已封装的混入样式来开发，方便后期维护，公用的文件尽量不要改动。

     增加 proxy 本地代理规范，参见 vue.config.js

  ```json
  proxy: {
      '/api': {
          target: 'http://192.168.1.1:8080', // 域名+端口号，不能加路径
          changeOrigin: true, // 发送请求头中的host会设置成target
          pathRewrite: {}
      }
  }
  ```

### 6.2 联调后台接口状态码规范

常用状态码

```json
CODE_MESSAGE: {
    200: '成功',
    304: '缓存',
    401: '尚未登录授权，请登录',
    403: '禁止访问，请联系管理员',
    404: '请求地址出错: 请联系管理员',
    500: '查找失败, 服务器发生错误，或数据异常',
    502: '网关错误。',
    503: '服务不可用，服务器暂时过载或维护。',
    504: '网关超时。',
};
```

### 6.3 UI 规范要求

尽量 100%高保真还原 UI 设计图及保证交互流畅

### 6.3 常用 vue 组件规范

#### 6.3.1 Vue 组件命名

组件的命名需遵从以下原则：

1. 有意义的 : 不过于具体，也不过于抽象
2. 简短 : 2 到 3 个单词
3. 具有可读性 : 以便于沟通交流
4. 小写字母命名

如：commonheader.vue， common_header.vue

#### 6.3.2 组件结构化

按照一定的结构组织，使得组件便于理解。 vue 组件里，根据其生命周期依次组织代码。执行顺序：name>mixins>props>data>computed>components>watch>methods>created>mounted>unmounted

```vue
<template>
<div class="wrapper"></div>
</template>
<script>
    import HelloWorld from './components/helloworld.vue';

    export default {
        name: 'LayoutDefault',
        mixins: [],
        props: {},
        data() {
            return {
                leftDrawerOpen: false,
            };
        },
        computed: {},
        components: {
            HelloWorld,
        },
        watch: {},
        methods: {
            // 获取初始化数据
            getInitData() {},
            // 新增功能
            handleAdd() {},
            // 监听删除
            onDelete() {},
            /**
         * 监听input值变化
         * @param val String input输入值
         * @param oldVal String input原来旧值
         * */ 
            onInputChangeVal(val, oldVal) {}
        },
        created() {},
        mounted() {},
        unmounted() {},
    };
</script>
<style lang="scss" scoped></style>
```

1. 使用单文件 .vue 文件格式来组件代码, 即 HTML,js,css 同一个文件内。
2. 按首字母排序 properties, data, computed, watch 和 methods 使得这些对象内的属性便于查找。
3. 一个清晰、组织有序的组件，使得组件易于阅读和理解。(name; extends; props, data and computed; components; watch and methods; lifecycle methods 等.);
4. 合理的 CSS 结构，这里采用 BEM 规则，便于模块化、可复用， 可以提供给我们优良的代码结构和易于识别的术语。请使用`纯小写字母`或`小写字母和下划线组合`。 **BEM规则: block_element--modifier语法**
5. js变量和事件方法命名请使用`小驼峰命名`。
    js事件方法名，多以动词命名, 且选取有意义的词, 并写清必要的注释, 如上所示。